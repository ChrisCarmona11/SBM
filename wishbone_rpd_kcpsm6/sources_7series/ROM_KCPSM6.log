KCPSM6 Assembler log file for program 'C:\ug947\core_mixto_comandos_nexys2\core_mixto_comandos\wishbone_rpd\sources_7series\ROM_KCPSM6.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 15 Feb 2022
Assembly timestamp: 14:51:38

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 3FF hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 442
Memory locations available: 3654


Assembly listing

 Addr Code                                Instruction

 000                                      ;SPR YES
 000                                      ;PCR YES
 000                                      ;MTM_CODE START,0
 000                                      ;--===========================================================================--
 000                                      ;--
 000                                      ;--  MASTER SEA CONTROL
 000                                      ;--
 000                                      ;--  - FEB 20011
 000                                      ;--  - UPV / EHU.
 000                                      ;--
 000                                      ;-- Design units  : GENERAL WISHBONE MODULES
 000                                      ;--
 000                                      ;-- File name     : wbm_uart_v02_ROM0.asm
 000                                      ;--
 000                                      ;-- Purpose       : emoteldi control/debug
 000                                      ;--
 000                                      ;-- Library       : -
 000                                      ;--
 000                                      ;-- Languaje : ASSEMBLER FOR kcpsm3
 000                                      ;--
 000                                      ;-- Assembler  : TRA
 000                                      ;--
 000                                      ;-- Debugger : pblazeide
 000                                      ;--===========================================================================--
 000                                      ;-------------------------------------------------------------------------------
 000                                      ;-- Revision list
 000                                      ;-- Version   Author                 Date           Changes
 000                                      ;--
 000                                      ;-- 081113   Armando Astarloa   13 Nov 2008      Initial version
 000                                      ;-- 090429   Armando Astarloa   29 Abril 2009      Display hex values
 000                                      ;-- 091127   Armando Astarloa   27 Noviembre 2009      Command soft reset
 000                                      ;-- 110202   Armando Astarloa   2 Februrary 2011      Master version
 000                                      ;-- 220214   Armando Astarloa   2 Februrary 2022      Hertbeat in general output
 000                                      ;-- 220215   Armando Astarloa   15 Februrary 2022     kcspm6
 000                                      ;--
 000                                      ;-------------------------------------------------------------------------------
 000                                      ;-- Description    :  INTELIGENT WISHBONE / SERIE INTERFACE
 000                                      ;-------------------------------------------------------------------------------
 000                                      ;--ROM 0 (program memory bank 0)
 000                                      ;VHDL "ROM_BLANK.vhd","ROM_KCPSM3.vhd","ROM_KCPSM3"
 000                                      ;--
 000                                      ;-- CONSTANT DEFINITIONS
 000                                      ;--
 000                                      ;
 000                                      ; ASCII CODES
 000                                      ;
 000                                      CONSTANT cero, 30                                        ;ASCII 0
 000                                      CONSTANT uno, 31                                         ;ASCII 0
 000                                      CONSTANT cuatro, 34                                      ;ASCII 4
 000                                      CONSTANT ocho, 38                                        ;ASCII 8
 000                                      CONSTANT a_ascii, 61                                     ;ASCII a
 000                                      CONSTANT BSPACE, 08                                      ;ASCII control H
 000                                      CONSTANT CRETURN, 0D                                     ;ASCII carriage return
 000                                      CONSTANT LFEED, 0A                                       ;ASCII line feed
 000                                      CONSTANT Amay, 41                                        ;ASCII A
 000                                      CONSTANT d_ascii, 64                                     ;ASCII d
 000                                      CONSTANT Dmay, 44                                        ;ASCII D
 000                                      CONSTANT Emay, 45                                        ;ASCII E
 000                                      CONSTANT e_ascii, 65                                     ;ASCII e
 000                                      CONSTANT f_ascii, 66                                     ;ASCII f
 000                                      CONSTANT g, 67                                           ;ASCII g
 000                                      CONSTANT h, 68                                           ;ASCII h
 000                                      CONSTANT Hmay, 48                                        ;ASCII H
 000                                      CONSTANT l, 6C                                           ;ASCII l
 000                                      CONSTANT Lmay, 4C                                        ;ASCII L
 000                                      CONSTANT r, 72                                           ;ASCII r
 000                                      CONSTANT arrow, 3E                                       ;ASCII >
 000                                      CONSTANT Omay, 4F                                        ;ASCII O
 000                                      CONSTANT o, 6F                                           ;ASCII O
 000                                      CONSTANT Pmay, 50                                        ;ASCII P
 000                                      CONSTANT Rmay, 52                                        ;ASCII R
 000                                      CONSTANT s, 73                                           ;ASCII s
 000                                      CONSTANT Smay, 53                                        ;ASCII S
 000                                      CONSTANT x, 78                                           ;ASCII x
 000                                      CONSTANT Xmay, 58                                        ;ASCII X
 000                                      CONSTANT t, 74                                           ;ASCII t
 000                                      CONSTANT w, 77                                           ;ASCII t
 000                                      CONSTANT k, 6B
 000                                      CONSTANT exclamation, 21
 000                                      CONSTANT Wmay, 57
 000                                      CONSTANT space, 20
 000                                      CONSTANT i, 69
 000                                      CONSTANT Imay, 49
 000                                      CONSTANT n, 6E
 000                                      CONSTANT Tmay, 54                                        ;ASCII T
 000                                      CONSTANT equal, 3D                                       ;ASCII =
 000                                      CONSTANT Mmay, 4D                                        ;ASCII = M
 000                                      CONSTANT m, 6D                                           ;ASCII = m
 000                                      CONSTANT pipe, 7C                                        ;ASCII = |
 000                                      CONSTANT heartb, AA
 000                                      ;
 000                                      CONSTANT sw_rst_high_instruction_cycles, 05              ;Number of instruction cycles
 000                                      ; that soft_reset is high
 000                                      ;
 000                                      NAMEREG s0, DATA_WB_7_0_REG                              ;for input and outputs
 000                                      NAMEREG s1, DATA_WB_15_8_REG                             ;for input and outputs
 000                                      NAMEREG s2, ADDR_WB_LOW_REG                              ; s2 ->
 000                                      NAMEREG s3, ADDR_WB_HIGH_REG                             ; s3 ->
 000                                      NAMEREG s4, TMP1                                         ; s4 ->
 000                                      NAMEREG s5, TMP2                                         ; s5 ->
 000                                      NAMEREG s6, SAVE_ACCUM                                   ; s6 ->
 000                                      NAMEREG s7, FIFO0                                        ; s7 -> TMP DATA STORAGE
 000                                      NAMEREG s8, FIFO1                                        ; s7 -> TMP DATA STORAGE
 000                                      NAMEREG s9, FIFO2                                        ; s7 -> TMP DATA STORAGE
 000                                      NAMEREG sA, FIFO3                                        ; s7 -> TMP DATA STORAGE
 000                                      NAMEREG sD, FIFO_POINTER                                 ; s7 -> TMP DATA STORAGE
 000                                      NAMEREG sC, RECEIVED_DATA                                ; sD -> received data register
 000                                      NAMEREG sE, MY_STATUS                                    ; MY_STATUS -> my_status
 000                                      CONSTANT STA_IDLE, 00
 000                                      CONSTANT STA_DATA_RECEIVED, 01
 000                                      CONSTANT STA_COMMAND_TO_PROC, 02
 000                                      CONSTANT DATA_TO_WRITE_IN_WB, 04
 000                                      NAMEREG sF, accumulator                                  ; sF -> accumulator
 000                                      ;
 000                                      ;--
 000                                      ;-- OUTPUT PORTS
 000                                      ;--
 000                                      ;--
 000                                      ;-- WISHBONE INTERFACE PORTS - OUTPUTS
 000                                      ;--
 000                                      CONSTANT DATA_WB_OUT_7_0, 00
 000                                      CONSTANT DATA_WB_OUT_15_8, 01
 000                                      CONSTANT ADDR_WB_LOWEST, 02
 000                                      CONSTANT ADDR_WB_HIGHEST, 03
 000                                      CONSTANT CONTROL_WB_OUT, 04
 000                                      ; D7 =
 000                                      ; D6 =
 000                                      ; D5 =
 000                                      ; D4 =
 000                                      ; D3 =
 000                                      ; D2 =
 000                                      ; D1 = WE_O
 000                                      ; D0 = STB_O
 000                                      ; STB_O = 1 & W_WE=0  = 0
 000                                      CONSTANT READ_SLAVE, 01
 000                                      ; STB_O = 1  & W_WE=1  = 0
 000                                      CONSTANT WRITE_SLAVE, 03
 000                                      ; STB_O = 1  & W_WE=1  = 0
 000                                      CONSTANT UART_TX_DATA, 05
 000                                      CONSTANT GENERAL_OUTPUT, 06
 000                                      ;SOFT RESET ACTIVATION PORT
 000                                      CONSTANT SOFT_RESET, 07
 000                                      ;--
 000                                      ;-- IN PORTS
 000                                      ;--
 000                                      ;--
 000                                      ;-- WISHBONE INTERFACE PORTS - INS
 000                                      ;--
 000                                      CONSTANT CONTROL_WB_IN, 00
 000                                      ; D7 =
 000                                      ; D6 =
 000                                      ; D5 =
 000                                      ; D4 =
 000                                      ; D3 =
 000                                      ; D2 =
 000                                      ; D1 =
 000                                      ; D0 = ACK_I
 000                                      ;
 000                                      ;CONSTANT ACK_I,01
 000                                      CONSTANT ACK_I, 01
 000                                      ;--
 000                                      ;-- WISHBONE INTERFACE PORTS - INS
 000                                      ;--
 000                                      CONSTANT DATA_WB_IN_7_0, 01
 000                                      CONSTANT DATA_WB_IN_15_8, 02
 000                                      CONSTANT UARTRX_DATA, 03
 000                                      CONSTANT UART_STATUS, 04
 000                                      ; D7 = UARTRX_BUFFER_DATA_PRESENT
 000                                      ; D6 = UARTRX_BUFFER_FULL
 000                                      ; D5 = UARTRX_BUFFER_HALF_FULL
 000                                      ; D4 = - (0)
 000                                      ; D3 = - (0)
 000                                      ; D2 = - (0)
 000                                      ; D1 = UARTTX_BUFFER_FULL
 000                                      ; D0 = UARTTX_BUFFER_HALF_FULL
 000                                      ;
 000                                      ;--
 000                                      ;-- REGISTERS INITIALIZATION
 000                                      ;--
 000                      inicialization: 
 000                                      ;
 000                                      ; WISHBONE BUS INIZIALIZATION
 000                                      ;
 000  01F00                               LOAD sF[accumulator], 00
 001  2DF07                               OUTPUT sF[accumulator], 07[SOFT_RESET]
 002  2DF00                               OUTPUT sF[accumulator], 00[DATA_WB_OUT_7_0]
 003  2DF01                               OUTPUT sF[accumulator], 01[DATA_WB_OUT_15_8]
 004  2DF04                               OUTPUT sF[accumulator], 04[CONTROL_WB_OUT]
 005  01E00                               LOAD sE[MY_STATUS], 00
 006  01D00                               LOAD sD[FIFO_POINTER], 00
 007  01300                               LOAD s3[ADDR_WB_HIGH_REG], 00
 008  01200                               LOAD s2[ADDR_WB_LOW_REG], 00
 009                                      ; HEART BEAT INITIALIZATION
 009  01FFF                               LOAD sF[accumulator], FF
 00A  2DF06                               OUTPUT sF[accumulator], 06[GENERAL_OUTPUT]
 00B                                      ;
 00B                                      ;
 00B                                      ;ENABLE INTERRUPT
 00B  2013C                               CALL 13C[msg_command_inicio]
 00C  28001                               ENABLE INTERRUPT
 00D                                      ;
 00D                                      ; MAIN PROGRAMM
 00D                                      ;
 00D                                main: 
 00D                                      ;
 00D                                      ; CHECK FOR RECEIVED DATA
 00D                                      ;
 00D  01F01                               LOAD sF[accumulator], 01[STA_DATA_RECEIVED]
 00E  02FE0                               AND sF[accumulator], sE[MY_STATUS]
 00F  34082                               CALL NZ, 082[process_fifo]
 010                                      ;
 010                                      ; MOVE TO INTERRUPT ROUTINE (TOO LARGE???)
 010                                      ;
 010                                      ; CHECK FOR COMMAND RECEIVED
 010                                      ;
 010  01F02                               LOAD sF[accumulator], 02[STA_COMMAND_TO_PROC]
 011  02FE0                               AND sF[accumulator], sE[MY_STATUS]
 012  3401A                               CALL NZ, 01A[process_commands]
 013                                      ;
 013                                      ; CHECK FOR DATA TO SEND THROUGH WB IF
 013                                      ;
 013  01F04                               LOAD sF[accumulator], 04[DATA_TO_WRITE_IN_WB]
 014  02FE0                               AND sF[accumulator], sE[MY_STATUS]
 015  3409F                               CALL NZ, 09F[send_through_wb_interface]
 016                                      ;
 016  09F06                               INPUT sF[accumulator], 06[GENERAL_OUTPUT]
 017  07FFF                               XOR sF[accumulator], FF
 018  2DF06                               OUTPUT sF[accumulator], 06[GENERAL_OUTPUT]
 019  2200D                               JUMP 00D[main]
 01A                                      ;
 01A                                      ; PROCESS COMMANDS
 01A                                      ;
 01A                    process_commands: 
 01A                                      ;
 01A                                      ; RESET STA_COMMAND_TO_PROC FLAG
 01A                                      ;
 01A  03EFD                               AND sE[MY_STATUS], FD
 01B                                      ; L,l
 01B  00F70                               LOAD sF[accumulator], s7[FIFO0]
 01C                                      ; detect command l
 01C  07F6C                               XOR sF[accumulator], 6C[l]
 01D  32064                               JUMP Z, 064[command_L]
 01E  00F70                               LOAD sF[accumulator], s7[FIFO0]
 01F                                      ; detect command L
 01F  07F4C                               XOR sF[accumulator], 4C[Lmay]
 020  32064                               JUMP Z, 064[command_L]
 021                                      ; H,h
 021  00F70                               LOAD sF[accumulator], s7[FIFO0]
 022                                      ; detect command H
 022  07F48                               XOR sF[accumulator], 48[Hmay]
 023  3206B                               JUMP Z, 06B[command_H]
 024  00F70                               LOAD sF[accumulator], s7[FIFO0]
 025                                      ; detect command h
 025  07F68                               XOR sF[accumulator], 68[h]
 026  3206B                               JUMP Z, 06B[command_H]
 027                                      ; a,A
 027  00F70                               LOAD sF[accumulator], s7[FIFO0]
 028                                      ; detect command a
 028  07F61                               XOR sF[accumulator], 61[a_ascii]
 029  3204C                               JUMP Z, 04C[command_a]
 02A  00F70                               LOAD sF[accumulator], s7[FIFO0]
 02B                                      ; detect command A
 02B  07F41                               XOR sF[accumulator], 41[Amay]
 02C  3204C                               JUMP Z, 04C[command_a]
 02D                                      ; s,S
 02D  00F70                               LOAD sF[accumulator], s7[FIFO0]
 02E                                      ; detect command s
 02E  07F73                               XOR sF[accumulator], 73[s]
 02F  32051                               JUMP Z, 051[command_s]
 030  00F70                               LOAD sF[accumulator], s7[FIFO0]
 031                                      ; detect command S
 031  07F53                               XOR sF[accumulator], 53[Smay]
 032  32051                               JUMP Z, 051[command_s]
 033                                      ; r,R
 033  00F70                               LOAD sF[accumulator], s7[FIFO0]
 034                                      ; detect command r
 034  07F72                               XOR sF[accumulator], 72[r]
 035  32056                               JUMP Z, 056[command_r]
 036  00F70                               LOAD sF[accumulator], s7[FIFO0]
 037                                      ; detect command R
 037  07F52                               XOR sF[accumulator], 52[Rmay]
 038  32056                               JUMP Z, 056[command_r]
 039                                      ; d,D
 039  00F70                               LOAD sF[accumulator], s7[FIFO0]
 03A                                      ; detect command d
 03A  07F64                               XOR sF[accumulator], 64[d_ascii]
 03B  32060                               JUMP Z, 060[command_d]
 03C  00F70                               LOAD sF[accumulator], s7[FIFO0]
 03D                                      ; detect command D
 03D  07F44                               XOR sF[accumulator], 44[Dmay]
 03E  32060                               JUMP Z, 060[command_d]
 03F                                      ; t,T
 03F  00F70                               LOAD sF[accumulator], s7[FIFO0]
 040                                      ; detect command t
 040  07F74                               XOR sF[accumulator], 74[t]
 041  32070                               JUMP Z, 070[command_t]
 042  00F70                               LOAD sF[accumulator], s7[FIFO0]
 043                                      ; detect command T
 043  07F54                               XOR sF[accumulator], 54[Tmay]
 044  32070                               JUMP Z, 070[command_t]
 045                                      ; x,X
 045  00F70                               LOAD sF[accumulator], s7[FIFO0]
 046                                      ; detect command x
 046  07F78                               XOR sF[accumulator], 78[x]
 047  32074                               JUMP Z, 074[command_x]
 048  00F70                               LOAD sF[accumulator], s7[FIFO0]
 049                                      ; detect command X
 049  07F58                               XOR sF[accumulator], 58[Xmay]
 04A  32074                               JUMP Z, 074[command_x]
 04B                                      ;
 04B                                      ; no command
 04B                                      ;
 04B  25000                               RETURN 
 04C                           command_a: 
 04C                                      ;
 04C                                      ; COMMAND a
 04C                                      ; WB address LSB
 04C                                      ;
 04C                                      ; store the ADR (7..0) data value
 04C                                      ;
 04C                                      ; convert ascii values to binary
 04C  2018B                               CALL 18B[convert_2hex_to_bin]
 04D                                      ; LOAD WB DATA mP Internal registers
 04D  002F0                               LOAD s2[ADDR_WB_LOW_REG], sF[accumulator]
 04E  200C0                               CALL 0C0[msg_ok]
 04F  200BC                               CALL 0BC[msg_prompt]
 050  25000                               RETURN 
 051                           command_s: 
 051                                      ;
 051                                      ; COMMAND s
 051                                      ; WB address MSB
 051                                      ;
 051                                      ; store the ADR (15..8) data value
 051                                      ;
 051                                      ; convert ascii values to binary
 051  2018B                               CALL 18B[convert_2hex_to_bin]
 052                                      ; LOAD WB DATA mP Internal registers
 052  003F0                               LOAD s3[ADDR_WB_HIGH_REG], sF[accumulator]
 053  200C0                               CALL 0C0[msg_ok]
 054  200BC                               CALL 0BC[msg_prompt]
 055  25000                               RETURN 
 056                           command_r: 
 056                                      ;
 056                                      ; COMMAND r
 056                                      ; read data from ADR(15..0) address
 056                                      ;
 056  200C0                               CALL 0C0[msg_ok]
 057  2D303                               OUTPUT s3[ADDR_WB_HIGH_REG], 03[ADDR_WB_HIGHEST]
 058  2D202                               OUTPUT s2[ADDR_WB_LOW_REG], 02[ADDR_WB_LOWEST]
 059  01F01                               LOAD sF[accumulator], 01[READ_SLAVE]
 05A  2DF04                               OUTPUT sF[accumulator], 04[CONTROL_WB_OUT]
 05B  200A8                               CALL 0A8[wait_for_the_ack]
 05C                                      ;load data from wb in registers and clear read r,est
 05C  200AC                               CALL 0AC[data_available_on_wb_master]
 05D                                      ;display the r,ested data
 05D  200E0                               CALL 0E0[msg_command_r]
 05E  200BC                               CALL 0BC[msg_prompt]
 05F  25000                               RETURN 
 060                           command_d: 
 060                                      ;
 060                                      ; COMMAND d
 060                                      ; read actual address from registers
 060                                      ;
 060  200C0                               CALL 0C0[msg_ok]
 061  20104                               CALL 104[msg_command_d]
 062  200BC                               CALL 0BC[msg_prompt]
 063  25000                               RETURN 
 064                           command_L: 
 064                                      ;
 064                                      ; COMMAND L
 064                                      ; WB data LSB
 064                                      ;
 064                                      ; store the WB (7..0) data value
 064                                      ; into the registers and set
 064                                      ; the flag to write them into
 064                                      ; the wb bus
 064                                      ;
 064                                      ; convert ascii values to binary
 064  2018B                               CALL 18B[convert_2hex_to_bin]
 065                                      ; LOAD WB DATA mP Internal registers
 065  000F0                               LOAD s0[DATA_WB_7_0_REG], sF[accumulator]
 066  05E04                               OR sE[MY_STATUS], 04[DATA_TO_WRITE_IN_WB]
 067  200C0                               CALL 0C0[msg_ok]
 068  200C8                               CALL 0C8[msg_command_H]
 069  200BC                               CALL 0BC[msg_prompt]
 06A  25000                               RETURN 
 06B                           command_H: 
 06B                                      ;
 06B                                      ; COMMAND H
 06B                                      ; WB data MSB
 06B                                      ;
 06B                                      ; store the WB (15..0) data value
 06B                                      ; into the registers
 06B                                      ;
 06B                                      ; convert ascii values to binary
 06B  2018B                               CALL 18B[convert_2hex_to_bin]
 06C                                      ; LOAD WB DATA mP Internal registers
 06C  001F0                               LOAD s1[DATA_WB_15_8_REG], sF[accumulator]
 06D  200C0                               CALL 0C0[msg_ok]
 06E  200BC                               CALL 0BC[msg_prompt]
 06F  25000                               RETURN 
 070                           command_t: 
 070                                      ;
 070                                      ; COMMAND t
 070                                      ;
 070                                      ;
 070                                      ; RETURNurns the ASCII value of the hexadecimal
 070                                      ; value entered (for recognizing what must
 070                                      ; RETURNurn Laa and R)
 070  200C0                               CALL 0C0[msg_ok]
 071  2012B                               CALL 12B[msg_command_t]
 072  200BC                               CALL 0BC[msg_prompt]
 073  25000                               RETURN 
 074                           command_x: 
 074                                      ;
 074                                      ; COMMAND x
 074                                      ;
 074                                      ;
 074                                      ; Set sw_rst output high
 074                                      ; for sw_rst_high_instruction_cycles*8 (clocik clycles)
 074                                      ;
 074  200C0                               CALL 0C0[msg_ok]
 075  2014F                               CALL 14F[msg_command_high_soft_reset]
 076  01F01                               LOAD sF[accumulator], 01
 077  2DF07                               OUTPUT sF[accumulator], 07[SOFT_RESET]
 078  2007E                               CALL 07E[wait]
 079  01F00                               LOAD sF[accumulator], 00
 07A  2DF07                               OUTPUT sF[accumulator], 07[SOFT_RESET]
 07B  2016E                               CALL 16E[msg_command_low_soft_reset]
 07C  200BC                               CALL 0BC[msg_prompt]
 07D  25000                               RETURN 
 07E                                wait: 
 07E  01F05                               LOAD sF[accumulator], 05[sw_rst_high_instruction_cycles]
 07F                          dummy_loop: 
 07F  19F01                               SUB sF[accumulator], 01
 080  3607F                               JUMP NZ, 07F[dummy_loop]
 081  25000                               RETURN 
 082                        process_fifo: 
 082                                      ;
 082                                      ; RESET STA_DATA_RECEIVED FLAG
 082                                      ;
 082  03EFE                               AND sE[MY_STATUS], FE
 083                                      ; LEVEL 0?
 083  00FD0                               LOAD sF[accumulator], sD[FIFO_POINTER]
 084  04FF0                               OR sF[accumulator], sF[accumulator]
 085  36088                               JUMP NZ, 088[level_1]
 086                                      ; is level 0
 086                                      ; this register is used for
 086                                      ; the command
 086  007C0                               LOAD s7[FIFO0], sC[RECEIVED_DATA]
 087  22097                               JUMP 097[check_cr]
 088                             level_1: 
 088                                      ; LEVEL 1?
 088  07F01                               XOR sF[accumulator], 01
 089  3608C                               JUMP NZ, 08C[level_2]
 08A                                      ; is level 1
 08A  008C0                               LOAD s8[FIFO1], sC[RECEIVED_DATA]
 08B  22097                               JUMP 097[check_cr]
 08C                             level_2: 
 08C                                      ; LEVEL 2?
 08C  00FD0                               LOAD sF[accumulator], sD[FIFO_POINTER]
 08D  07F02                               XOR sF[accumulator], 02
 08E  36091                               JUMP NZ, 091[level_3]
 08F                                      ; is level 2
 08F  009C0                               LOAD s9[FIFO2], sC[RECEIVED_DATA]
 090  22097                               JUMP 097[check_cr]
 091                             level_3: 
 091                                      ; LEVEL 3?
 091  00FD0                               LOAD sF[accumulator], sD[FIFO_POINTER]
 092  07F03                               XOR sF[accumulator], 03
 093  36096                               JUMP NZ, 096[level_4]
 094                                      ; is level 2
 094  00AC0                               LOAD sA[FIFO3], sC[RECEIVED_DATA]
 095  22097                               JUMP 097[check_cr]
 096                             level_4: 
 096                                      ; RESET FIFO
 096  01DFF                               LOAD sD[FIFO_POINTER], FF
 097                            check_cr: 
 097                                      ; CHECK IF LF IS RECEIVED (CR-LF)
 097  11D01                               ADD sD[FIFO_POINTER], 01
 098  01F0D                               LOAD sF[accumulator], 0D[CRETURN]
 099  06FC0                               XOR sF[accumulator], sC[RECEIVED_DATA]
 09A                                      ; No LF
 09A  35000                               RETURN NZ
 09B                                      ; Set the flag to process
 09B                                      ; the command
 09B  05E02                               OR sE[MY_STATUS], 02[STA_COMMAND_TO_PROC]
 09C  01D00                               LOAD sD[FIFO_POINTER], 00
 09D  200BC                               CALL 0BC[msg_prompt]
 09E                                      ; RETURN TO THE MAIN PROGRAMM
 09E  25000                               RETURN 
 09F           send_through_wb_interface: 
 09F                                      ;
 09F                                      ; RESET STA_COMMAND_TO_PROC FLAG
 09F                                      ;
 09F  03EFB                               AND sE[MY_STATUS], FB
 0A0  2D303                               OUTPUT s3[ADDR_WB_HIGH_REG], 03[ADDR_WB_HIGHEST]
 0A1  2D202                               OUTPUT s2[ADDR_WB_LOW_REG], 02[ADDR_WB_LOWEST]
 0A2  2D000                               OUTPUT s0[DATA_WB_7_0_REG], 00[DATA_WB_OUT_7_0]
 0A3  2D101                               OUTPUT s1[DATA_WB_15_8_REG], 01[DATA_WB_OUT_15_8]
 0A4  01F03                               LOAD sF[accumulator], 03[WRITE_SLAVE]
 0A5  2DF04                               OUTPUT sF[accumulator], 04[CONTROL_WB_OUT]
 0A6  200A8                               CALL 0A8[wait_for_the_ack]
 0A7  220AE                               JUMP 0AE[clr_ctrl_wb_out]
 0A8                    wait_for_the_ack: 
 0A8                                      ;
 0A8                                      ; CONTROL_WB_IN -> TMP (s6)
 0A8                                      ;
 0A8  09F00                               INPUT sF[accumulator], 00[CONTROL_WB_IN]
 0A9                                      ;
 0A9  03F01                               AND sF[accumulator], 01[ACK_I]
 0AA  320A8                               JUMP Z, 0A8[wait_for_the_ack]
 0AB  25000                               RETURN 
 0AC         data_available_on_wb_master: 
 0AC                                      ; This part is not necessary into write operations
 0AC  09001                               INPUT s0[DATA_WB_7_0_REG], 01[DATA_WB_IN_7_0]
 0AD  09102                               INPUT s1[DATA_WB_15_8_REG], 02[DATA_WB_IN_15_8]
 0AE                                      ;continues with clr_ctrl_wb_out
 0AE                     clr_ctrl_wb_out: 
 0AE                                      ; DISABLE RD/WR OPERATION R,EST
 0AE  01F00                               LOAD sF[accumulator], 00
 0AF  2DF04                               OUTPUT sF[accumulator], 04[CONTROL_WB_OUT]
 0B0  25000                               RETURN 
 0B1                                      ;
 0B1                                      ; PROCESS COMMANDS   (NO)
 0B1                                      ;
 0B1                             tx_char: 
 0B1                                      ;
 0B1                                      ; Byte TX
 0B1                                      ; input: accumulator (byte to tx)
 0B1  004F0                               LOAD s4[TMP1], sF[accumulator]
 0B2                     check_tx_buffer: 
 0B2  09F04                               INPUT sF[accumulator], 04[UART_STATUS]
 0B3                                      ; CHECK THAT THE TX BUFFER IS EMPTY
 0B3  03F02                               AND sF[accumulator], 02
 0B4  360B2                               JUMP NZ, 0B2[check_tx_buffer]
 0B5                                      ; send the received character (ECHO)
 0B5  2D405                               OUTPUT s4[TMP1], 05[UART_TX_DATA]
 0B6  25000                               RETURN 
 0B7                             tx_crlf: 
 0B7                                      ; send CR+LF chars
 0B7  01F0D                               LOAD sF[accumulator], 0D[CRETURN]
 0B8  200B1                               CALL 0B1[tx_char]
 0B9  01F0A                               LOAD sF[accumulator], 0A[LFEED]
 0BA  200B1                               CALL 0B1[tx_char]
 0BB  25000                               RETURN 
 0BC                          msg_prompt: 
 0BC  200B7                               CALL 0B7[tx_crlf]
 0BD  01F3E                               LOAD sF[accumulator], 3E[arrow]
 0BE  200B1                               CALL 0B1[tx_char]
 0BF  25000                               RETURN 
 0C0                              msg_ok: 
 0C0                                      ; SEND TEXT MESSAGE
 0C0  200B7                               CALL 0B7[tx_crlf]
 0C1  01F4F                               LOAD sF[accumulator], 4F[Omay]
 0C2  200B1                               CALL 0B1[tx_char]
 0C3  01F6B                               LOAD sF[accumulator], 6B[k]
 0C4  200B1                               CALL 0B1[tx_char]
 0C5  01F21                               LOAD sF[accumulator], 21[exclamation]
 0C6  200B1                               CALL 0B1[tx_char]
 0C7  25000                               RETURN 
 0C8                       msg_command_H: 
 0C8                                      ; SEND TEXT MESSAGE
 0C8  200B7                               CALL 0B7[tx_crlf]
 0C9  01F57                               LOAD sF[accumulator], 57[Wmay]
 0CA  200B1                               CALL 0B1[tx_char]
 0CB  01F72                               LOAD sF[accumulator], 72[r]
 0CC  200B1                               CALL 0B1[tx_char]
 0CD  01F20                               LOAD sF[accumulator], 20[space]
 0CE  200B1                               CALL 0B1[tx_char]
 0CF  00F10                               LOAD sF[accumulator], s1[DATA_WB_15_8_REG]
 0D0                                      ; convert to ASCII
 0D0  200F8                               CALL 0F8[tx_char_hex_bin]
 0D1  00F00                               LOAD sF[accumulator], s0[DATA_WB_7_0_REG]
 0D2                                      ; convert to ASCII
 0D2  200F8                               CALL 0F8[tx_char_hex_bin]
 0D3  01F20                               LOAD sF[accumulator], 20[space]
 0D4  200B1                               CALL 0B1[tx_char]
 0D5  01F61                               LOAD sF[accumulator], 61[a_ascii]
 0D6  200B1                               CALL 0B1[tx_char]
 0D7  01F74                               LOAD sF[accumulator], 74[t]
 0D8  200B1                               CALL 0B1[tx_char]
 0D9  01F20                               LOAD sF[accumulator], 20[space]
 0DA  200B1                               CALL 0B1[tx_char]
 0DB  00F30                               LOAD sF[accumulator], s3[ADDR_WB_HIGH_REG]
 0DC                                      ; convert to ASCII
 0DC  200F8                               CALL 0F8[tx_char_hex_bin]
 0DD  00F20                               LOAD sF[accumulator], s2[ADDR_WB_LOW_REG]
 0DE                                      ; convert to ASCII
 0DE  200F8                               CALL 0F8[tx_char_hex_bin]
 0DF  25000                               RETURN 
 0E0                       msg_command_r: 
 0E0                                      ; SEND TEXT MESSAGE
 0E0  200B7                               CALL 0B7[tx_crlf]
 0E1  01F52                               LOAD sF[accumulator], 52[Rmay]
 0E2  200B1                               CALL 0B1[tx_char]
 0E3  01F64                               LOAD sF[accumulator], 64[d_ascii]
 0E4  200B1                               CALL 0B1[tx_char]
 0E5  01F20                               LOAD sF[accumulator], 20[space]
 0E6  200B1                               CALL 0B1[tx_char]
 0E7  00F10                               LOAD sF[accumulator], s1[DATA_WB_15_8_REG]
 0E8                                      ; convert to ASCII
 0E8  200F8                               CALL 0F8[tx_char_hex_bin]
 0E9  00F00                               LOAD sF[accumulator], s0[DATA_WB_7_0_REG]
 0EA                                      ; convert to ASCII
 0EA  200F8                               CALL 0F8[tx_char_hex_bin]
 0EB  01F20                               LOAD sF[accumulator], 20[space]
 0EC  200B1                               CALL 0B1[tx_char]
 0ED  01F61                               LOAD sF[accumulator], 61[a_ascii]
 0EE  200B1                               CALL 0B1[tx_char]
 0EF  01F74                               LOAD sF[accumulator], 74[t]
 0F0  200B1                               CALL 0B1[tx_char]
 0F1  01F20                               LOAD sF[accumulator], 20[space]
 0F2  200B1                               CALL 0B1[tx_char]
 0F3  00F30                               LOAD sF[accumulator], s3[ADDR_WB_HIGH_REG]
 0F4                                      ; convert to ASCII
 0F4  200F8                               CALL 0F8[tx_char_hex_bin]
 0F5  00F20                               LOAD sF[accumulator], s2[ADDR_WB_LOW_REG]
 0F6                                      ; convert to ASCII
 0F6  200F8                               CALL 0F8[tx_char_hex_bin]
 0F7  25000                               RETURN 
 0F8                     tx_char_hex_bin: 
 0F8  005F0                               LOAD s5[TMP2], sF[accumulator]
 0F9                                      ; tx ascii that reprensents in hex 4 most significant bits
 0F9  14F0E                               SR0 sF[accumulator]                                      ;
 0FA  14F0E                               SR0 sF[accumulator]                                      ;
 0FB  14F0E                               SR0 sF[accumulator]                                      ;
 0FC  14F0E                               SR0 sF[accumulator]                                      ;
 0FD  201A1                               CALL 1A1[bintoasciihex]
 0FE  200B1                               CALL 0B1[tx_char]
 0FF  00F50                               LOAD sF[accumulator], s5[TMP2]
 100                                      ; tx ascii that reprensents in hex 4 LEAST significant bits
 100  03F0F                               AND sF[accumulator], 0F                                  ;
 101  201A1                               CALL 1A1[bintoasciihex]                                  ;
 102  200B1                               CALL 0B1[tx_char]
 103  25000                               RETURN 
 104                       msg_command_d: 
 104                                      ; SEND ADDRESS REGISTERS
 104  200B7                               CALL 0B7[tx_crlf]
 105  01F41                               LOAD sF[accumulator], 41[Amay]
 106  200B1                               CALL 0B1[tx_char]
 107  01F64                               LOAD sF[accumulator], 64[d_ascii]
 108  200B1                               CALL 0B1[tx_char]
 109  01F64                               LOAD sF[accumulator], 64[d_ascii]
 10A  200B1                               CALL 0B1[tx_char]
 10B  01F72                               LOAD sF[accumulator], 72[r]
 10C  200B1                               CALL 0B1[tx_char]
 10D  01F20                               LOAD sF[accumulator], 20[space]
 10E  200B1                               CALL 0B1[tx_char]
 10F  01F3D                               LOAD sF[accumulator], 3D[equal]
 110  200B1                               CALL 0B1[tx_char]
 111  01F20                               LOAD sF[accumulator], 20[space]
 112  200B1                               CALL 0B1[tx_char]
 113  00F30                               LOAD sF[accumulator], s3[ADDR_WB_HIGH_REG]
 114                                      ; convert to ASCII
 114  200F8                               CALL 0F8[tx_char_hex_bin]
 115  00F20                               LOAD sF[accumulator], s2[ADDR_WB_LOW_REG]
 116                                      ; convert to ASCII
 116  200F8                               CALL 0F8[tx_char_hex_bin]
 117                                      ; SEND DATA REGISTERS
 117  200B7                               CALL 0B7[tx_crlf]
 118  01F44                               LOAD sF[accumulator], 44[Dmay]
 119  200B1                               CALL 0B1[tx_char]
 11A  01F61                               LOAD sF[accumulator], 61[a_ascii]
 11B  200B1                               CALL 0B1[tx_char]
 11C  01F74                               LOAD sF[accumulator], 74[t]
 11D  200B1                               CALL 0B1[tx_char]
 11E  01F61                               LOAD sF[accumulator], 61[a_ascii]
 11F  200B1                               CALL 0B1[tx_char]
 120  01F20                               LOAD sF[accumulator], 20[space]
 121  200B1                               CALL 0B1[tx_char]
 122  01F3D                               LOAD sF[accumulator], 3D[equal]
 123  200B1                               CALL 0B1[tx_char]
 124  01F20                               LOAD sF[accumulator], 20[space]
 125  200B1                               CALL 0B1[tx_char]
 126  00F10                               LOAD sF[accumulator], s1[DATA_WB_15_8_REG]
 127                                      ; convert to ASCII
 127  200F8                               CALL 0F8[tx_char_hex_bin]
 128  00F00                               LOAD sF[accumulator], s0[DATA_WB_7_0_REG]
 129                                      ; convert to ASCII
 129  200F8                               CALL 0F8[tx_char_hex_bin]
 12A  25000                               RETURN 
 12B                       msg_command_t: 
 12B  200B7                               CALL 0B7[tx_crlf]
 12C  00F80                               LOAD sF[accumulator], s8[FIFO1]
 12D  200B1                               CALL 0B1[tx_char]
 12E  00F90                               LOAD sF[accumulator], s9[FIFO2]
 12F  200B1                               CALL 0B1[tx_char]
 130  01F20                               LOAD sF[accumulator], 20[space]
 131  200B1                               CALL 0B1[tx_char]
 132  01F69                               LOAD sF[accumulator], 69[i]
 133  200B1                               CALL 0B1[tx_char]
 134  01F73                               LOAD sF[accumulator], 73[s]
 135  200B1                               CALL 0B1[tx_char]
 136  01F20                               LOAD sF[accumulator], 20[space]
 137  200B1                               CALL 0B1[tx_char]
 138                                      ; convert ASCII values to binary
 138  2018B                               CALL 18B[convert_2hex_to_bin]
 139                                      ; convert to ASCII
 139  11F30                               ADD sF[accumulator], 30
 13A  200B1                               CALL 0B1[tx_char]
 13B  25000                               RETURN 
 13C                  msg_command_inicio: 
 13C                                      ; SEND TEXT MESSAGE
 13C  200B7                               CALL 0B7[tx_crlf]
 13D  01F41                               LOAD sF[accumulator], 41[Amay]
 13E  200B1                               CALL 0B1[tx_char]
 13F  01F50                               LOAD sF[accumulator], 50[Pmay]
 140  200B1                               CALL 0B1[tx_char]
 141  01F45                               LOAD sF[accumulator], 45[Emay]
 142  200B1                               CALL 0B1[tx_char]
 143  01F52                               LOAD sF[accumulator], 52[Rmay]
 144  200B1                               CALL 0B1[tx_char]
 145  01F54                               LOAD sF[accumulator], 54[Tmay]
 146  200B1                               CALL 0B1[tx_char]
 147  01F20                               LOAD sF[accumulator], 20[space]
 148  200B1                               CALL 0B1[tx_char]
 149  01F31                               LOAD sF[accumulator], 31[uno]
 14A  200B1                               CALL 0B1[tx_char]
 14B  01F31                               LOAD sF[accumulator], 31[uno]
 14C  200B1                               CALL 0B1[tx_char]
 14D  200BC                               CALL 0BC[msg_prompt]
 14E  25000                               RETURN 
 14F         msg_command_high_soft_reset: 
 14F  01F53                               LOAD sF[accumulator], 53[Smay]
 150  200B1                               CALL 0B1[tx_char]
 151  01F6F                               LOAD sF[accumulator], 6F[o]
 152  200B1                               CALL 0B1[tx_char]
 153  01F66                               LOAD sF[accumulator], 66[f_ascii]
 154  200B1                               CALL 0B1[tx_char]
 155  01F74                               LOAD sF[accumulator], 74[t]
 156  200B1                               CALL 0B1[tx_char]
 157  01F20                               LOAD sF[accumulator], 20[space]
 158  200B1                               CALL 0B1[tx_char]
 159  01F52                               LOAD sF[accumulator], 52[Rmay]
 15A  200B1                               CALL 0B1[tx_char]
 15B  01F65                               LOAD sF[accumulator], 65[e_ascii]
 15C  200B1                               CALL 0B1[tx_char]
 15D  01F73                               LOAD sF[accumulator], 73[s]
 15E  200B1                               CALL 0B1[tx_char]
 15F  01F65                               LOAD sF[accumulator], 65[e_ascii]
 160  200B1                               CALL 0B1[tx_char]
 161  01F74                               LOAD sF[accumulator], 74[t]
 162  200B1                               CALL 0B1[tx_char]
 163  01F20                               LOAD sF[accumulator], 20[space]
 164  200B1                               CALL 0B1[tx_char]
 165  01F48                               LOAD sF[accumulator], 48[Hmay]
 166  200B1                               CALL 0B1[tx_char]
 167  01F69                               LOAD sF[accumulator], 69[i]
 168  200B1                               CALL 0B1[tx_char]
 169  01F67                               LOAD sF[accumulator], 67[g]
 16A  200B1                               CALL 0B1[tx_char]
 16B  01F68                               LOAD sF[accumulator], 68[h]
 16C  200B1                               CALL 0B1[tx_char]
 16D  25000                               RETURN 
 16E          msg_command_low_soft_reset: 
 16E  01F53                               LOAD sF[accumulator], 53[Smay]
 16F  200B1                               CALL 0B1[tx_char]
 170  01F6F                               LOAD sF[accumulator], 6F[o]
 171  200B1                               CALL 0B1[tx_char]
 172  01F66                               LOAD sF[accumulator], 66[f_ascii]
 173  200B1                               CALL 0B1[tx_char]
 174  01F74                               LOAD sF[accumulator], 74[t]
 175  200B1                               CALL 0B1[tx_char]
 176  01F20                               LOAD sF[accumulator], 20[space]
 177  200B1                               CALL 0B1[tx_char]
 178  01F52                               LOAD sF[accumulator], 52[Rmay]
 179  200B1                               CALL 0B1[tx_char]
 17A  01F65                               LOAD sF[accumulator], 65[e_ascii]
 17B  200B1                               CALL 0B1[tx_char]
 17C  01F73                               LOAD sF[accumulator], 73[s]
 17D  200B1                               CALL 0B1[tx_char]
 17E  01F65                               LOAD sF[accumulator], 65[e_ascii]
 17F  200B1                               CALL 0B1[tx_char]
 180  01F74                               LOAD sF[accumulator], 74[t]
 181  200B1                               CALL 0B1[tx_char]
 182  01F20                               LOAD sF[accumulator], 20[space]
 183  200B1                               CALL 0B1[tx_char]
 184  01F4C                               LOAD sF[accumulator], 4C[Lmay]
 185  200B1                               CALL 0B1[tx_char]
 186  01F6F                               LOAD sF[accumulator], 6F[o]
 187  200B1                               CALL 0B1[tx_char]
 188  01F77                               LOAD sF[accumulator], 77[w]
 189  200B1                               CALL 0B1[tx_char]
 18A  25000                               RETURN 
 18B                 convert_2hex_to_bin: 
 18B                                      ; convert two HEX codes
 18B                                      ; to 1 binary
 18B                                      ; INPUT  : FIFO1,FIF02 ASCII codes
 18B                                      ; OUTPUT : accumulator (binary code)
 18B                                      ; convert ascii values to binary codes
 18B                                      ; MSB
 18B  00F80                               LOAD sF[accumulator], s8[FIFO1]
 18C  2019A                               CALL 19A[asciihextobin]
 18D  008F0                               LOAD s8[FIFO1], sF[accumulator]
 18E                                      ; LSB
 18E  00F90                               LOAD sF[accumulator], s9[FIFO2]
 18F  2019A                               CALL 19A[asciihextobin]
 190  009F0                               LOAD s9[FIFO2], sF[accumulator]
 191                                      ;MSB
 191  0390F                               AND s9[FIFO2], 0F                                        ;CLEAR LEFT NIBBLE (only 0-F values)
 192  0380F                               AND s8[FIFO1], 0F                                        ;CLEAR LEFT NIBBLE (only 0-F values)
 193                       do_conversion: 
 193  02880                               AND s8[FIFO1], s8[FIFO1]
 194  32198                               JUMP Z, 198[end_conversion]
 195  11910                               ADD s9[FIFO2], 10
 196  19801                               SUB s8[FIFO1], 01
 197  22193                               JUMP 193[do_conversion]
 198                      end_conversion: 
 198                                      ; binary data into the FIFO2 reg
 198  00F90                               LOAD sF[accumulator], s9[FIFO2]
 199  25000                               RETURN 
 19A                       asciihextobin: 
 19A                                      ; convert an ASCII with hex value
 19A                                      ; to 1 bin
 19A                                      ; INPUT  : accumulator  (ASCII codes)
 19A                                      ; OUTPUT : accumulator (binary code)
 19A  004F0                               LOAD s4[TMP1], sF[accumulator]
 19B  19440                               SUB s4[TMP1], 40
 19C  3E19F                               JUMP NC, 19F[subtract_37]
 19D  19F30                               SUB sF[accumulator], 30
 19E  25000                               RETURN 
 19F                         subtract_37: 
 19F  19F37                               SUB sF[accumulator], 37
 1A0  25000                               RETURN 
 1A1                       bintoasciihex: 
 1A1                                      ; convert a bin to an ASCII hex value
 1A1                                      ; INPUT  : accumulator  (binary code)
 1A1                                      ; OUTPUT : accumulator (ASCII codes)
 1A1  004F0                               LOAD s4[TMP1], sF[accumulator]
 1A2  1940A                               SUB s4[TMP1], 0A
 1A3                                      ; IF < A => ADD 30
 1A3                                      ; IF => A
 1A3  3E1A6                               JUMP NC, 1A6[add_37]
 1A4  11F30                               ADD sF[accumulator], 30
 1A5  25000                               RETURN 
 1A6                              add_37: 
 1A6  11F37                               ADD sF[accumulator], 37
 1A7  25000                               RETURN 
 1A8                          saca_tabla: 
 1A8                                      ;
 1A8                                      ; SACA LOS CARACTERES QUE REPRESENTARAN LOS VALORES DE 0 A 255
 1A8                                      ;EN ASCII CUANDO LOS SAQUE POR LA PANTALLA (LES SUMA 30)
 1A8                                      ;
 1A8  015EA                               LOAD s5[TMP2], EA
 1A9  200B7                        sigue: CALL 0B7[tx_crlf]
 1AA  00F50                               LOAD sF[accumulator], s5[TMP2]
 1AB  11F30                               ADD sF[accumulator], 30                                  ;CONVIERTE A ASCII
 1AC  200B1                               CALL 0B1[tx_char]                                        ;LO TRANSMITE
 1AD  11501                               ADD s5[TMP2], 01
 1AE  361A9                               JUMP NZ, 1A9[sigue]
 1AF  200C0                               CALL 0C0[msg_ok]
 1B0  200BC                               CALL 0BC[msg_prompt]
 1B1  25000                               RETURN 
 1B2                                      ;
 1B2                                      ;HEMOS DUPLICADO LA RUTINA DE ATENCIN
 1B2                                      ;
 1B2                       attention_int: 
 1B2  006F0                               LOAD s6[SAVE_ACCUM], sF[accumulator]
 1B3                                      ; READ THE DATA FROM THE UART
 1B3  09C03                               INPUT sC[RECEIVED_DATA], 03[UARTRX_DATA]
 1B4                                      ; send the received character (ECHO)
 1B4  00FC0                               LOAD sF[accumulator], sC[RECEIVED_DATA]
 1B5  200B1                               CALL 0B1[tx_char]
 1B6                                      ; set received data flag
 1B6  01E01                               LOAD sE[MY_STATUS], 01[STA_DATA_RECEIVED]
 1B7  00F60                               LOAD sF[accumulator], s6[SAVE_ACCUM]
 1B8  29001                               RETURNI ENABLE
 3FF                                      ADDRESS 3FF
 3FF                           interrupt: 
 3FF  221B2                               JUMP 1B2[attention_int]
 400                                      ;MTM_CODE STOP,0


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

C:\ug947\core_mixto_comandos_nexys2\core_mixto_comandos\wishbone_rpd\sources_7series\ROM_KCPSM6.psm



List of defined constants

 CONSTANT name                  Value        Source PSM File

 timestamp_hours                14'd         
 timestamp_minutes              51'd         
 timestamp_seconds              38'd         
 datestamp_year                 22'd         
 datestamp_month                2'd          
 datestamp_day                  15'd         
 NUL                            00           
 BEL                            07           
 BS                             08           
 HT                             09           
 LF                             0A           
 VT                             0B           
 CR                             0D           
 ESC                            1B           
 DEL                            7F           
 DCS                            90           
 ST                             9C           
 cero                           30           ROM_KCPSM6.psm
 uno                            31           ROM_KCPSM6.psm
 cuatro                         34           ROM_KCPSM6.psm
 ocho                           38           ROM_KCPSM6.psm
 a_ascii                        61           ROM_KCPSM6.psm
 BSPACE                         08           ROM_KCPSM6.psm
 CRETURN                        0D           ROM_KCPSM6.psm
 LFEED                          0A           ROM_KCPSM6.psm
 Amay                           41           ROM_KCPSM6.psm
 d_ascii                        64           ROM_KCPSM6.psm
 Dmay                           44           ROM_KCPSM6.psm
 Emay                           45           ROM_KCPSM6.psm
 e_ascii                        65           ROM_KCPSM6.psm
 f_ascii                        66           ROM_KCPSM6.psm
 g                              67           ROM_KCPSM6.psm
 h                              68           ROM_KCPSM6.psm
 Hmay                           48           ROM_KCPSM6.psm
 l                              6C           ROM_KCPSM6.psm
 Lmay                           4C           ROM_KCPSM6.psm
 r                              72           ROM_KCPSM6.psm
 arrow                          3E           ROM_KCPSM6.psm
 Omay                           4F           ROM_KCPSM6.psm
 o                              6F           ROM_KCPSM6.psm
 Pmay                           50           ROM_KCPSM6.psm
 Rmay                           52           ROM_KCPSM6.psm
 s                              73           ROM_KCPSM6.psm
 Smay                           53           ROM_KCPSM6.psm
 x                              78           ROM_KCPSM6.psm
 Xmay                           58           ROM_KCPSM6.psm
 t                              74           ROM_KCPSM6.psm
 w                              77           ROM_KCPSM6.psm
 k                              6B           ROM_KCPSM6.psm
 exclamation                    21           ROM_KCPSM6.psm
 Wmay                           57           ROM_KCPSM6.psm
 space                          20           ROM_KCPSM6.psm
 i                              69           ROM_KCPSM6.psm
 Imay                           49           ROM_KCPSM6.psm
 n                              6E           ROM_KCPSM6.psm
 Tmay                           54           ROM_KCPSM6.psm
 equal                          3D           ROM_KCPSM6.psm
 Mmay                           4D           ROM_KCPSM6.psm
 m                              6D           ROM_KCPSM6.psm
 pipe                           7C           ROM_KCPSM6.psm
 heartb                         AA           ROM_KCPSM6.psm
 sw_rst_high_instruction_cycles 05           ROM_KCPSM6.psm
 STA_IDLE                       00           ROM_KCPSM6.psm
 STA_DATA_RECEIVED              01           ROM_KCPSM6.psm
 STA_COMMAND_TO_PROC            02           ROM_KCPSM6.psm
 DATA_TO_WRITE_IN_WB            04           ROM_KCPSM6.psm
 DATA_WB_OUT_7_0                00           ROM_KCPSM6.psm
 DATA_WB_OUT_15_8               01           ROM_KCPSM6.psm
 ADDR_WB_LOWEST                 02           ROM_KCPSM6.psm
 ADDR_WB_HIGHEST                03           ROM_KCPSM6.psm
 CONTROL_WB_OUT                 04           ROM_KCPSM6.psm
 READ_SLAVE                     01           ROM_KCPSM6.psm
 WRITE_SLAVE                    03           ROM_KCPSM6.psm
 UART_TX_DATA                   05           ROM_KCPSM6.psm
 GENERAL_OUTPUT                 06           ROM_KCPSM6.psm
 SOFT_RESET                     07           ROM_KCPSM6.psm
 CONTROL_WB_IN                  00           ROM_KCPSM6.psm
 ACK_I                          01           ROM_KCPSM6.psm
 DATA_WB_IN_7_0                 01           ROM_KCPSM6.psm
 DATA_WB_IN_15_8                02           ROM_KCPSM6.psm
 UARTRX_DATA                    03           ROM_KCPSM6.psm
 UART_STATUS                    04           ROM_KCPSM6.psm



No TABLEs defined



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "15 Feb 2022"  
 timestamp$        "14:51:38"     



List of line labels

   Label                         Addr  Source PSM File

 * inicialization                000   ROM_KCPSM6.psm
   main                          00D   ROM_KCPSM6.psm
   process_commands              01A   ROM_KCPSM6.psm
   command_a                     04C   ROM_KCPSM6.psm
   command_s                     051   ROM_KCPSM6.psm
   command_r                     056   ROM_KCPSM6.psm
   command_d                     060   ROM_KCPSM6.psm
   command_L                     064   ROM_KCPSM6.psm
   command_H                     06B   ROM_KCPSM6.psm
   command_t                     070   ROM_KCPSM6.psm
   command_x                     074   ROM_KCPSM6.psm
   wait                          07E   ROM_KCPSM6.psm
   dummy_loop                    07F   ROM_KCPSM6.psm
   process_fifo                  082   ROM_KCPSM6.psm
   level_1                       088   ROM_KCPSM6.psm
   level_2                       08C   ROM_KCPSM6.psm
   level_3                       091   ROM_KCPSM6.psm
   level_4                       096   ROM_KCPSM6.psm
   check_cr                      097   ROM_KCPSM6.psm
   send_through_wb_interface     09F   ROM_KCPSM6.psm
   wait_for_the_ack              0A8   ROM_KCPSM6.psm
   data_available_on_wb_master   0AC   ROM_KCPSM6.psm
   clr_ctrl_wb_out               0AE   ROM_KCPSM6.psm
   tx_char                       0B1   ROM_KCPSM6.psm
   check_tx_buffer               0B2   ROM_KCPSM6.psm
   tx_crlf                       0B7   ROM_KCPSM6.psm
   msg_prompt                    0BC   ROM_KCPSM6.psm
   msg_ok                        0C0   ROM_KCPSM6.psm
   msg_command_H                 0C8   ROM_KCPSM6.psm
   msg_command_r                 0E0   ROM_KCPSM6.psm
   tx_char_hex_bin               0F8   ROM_KCPSM6.psm
   msg_command_d                 104   ROM_KCPSM6.psm
   msg_command_t                 12B   ROM_KCPSM6.psm
   msg_command_inicio            13C   ROM_KCPSM6.psm
   msg_command_high_soft_reset   14F   ROM_KCPSM6.psm
   msg_command_low_soft_reset    16E   ROM_KCPSM6.psm
   convert_2hex_to_bin           18B   ROM_KCPSM6.psm
   do_conversion                 193   ROM_KCPSM6.psm
   end_conversion                198   ROM_KCPSM6.psm
   asciihextobin                 19A   ROM_KCPSM6.psm
   subtract_37                   19F   ROM_KCPSM6.psm
   bintoasciihex                 1A1   ROM_KCPSM6.psm
   add_37                        1A6   ROM_KCPSM6.psm
 * saca_tabla                    1A8   ROM_KCPSM6.psm
   sigue                         1A9   ROM_KCPSM6.psm
   attention_int                 1B2   ROM_KCPSM6.psm
 * interrupt                     3FF   ROM_KCPSM6.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD            150
 STAR              -

 AND              12
 OR                3
 XOR              21

 ADD               7
 ADDCY             -
 SUB               6
 SUBCY             -

 TEST              -
 TESTCY            -
 COMPARE           -
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               4
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT             6
 OUTPUT           18
 OUTPUTK           -

 STORE             -
 FETCH             -

 DISABLE           -
 ENABLE            1
 RETURNI           1

 JUMP             35
 JUMP@             -
 CALL            146
 CALL@             -
 RETURN           32
 LOAD&RETURN       -

 HWBUILD           -



End of KCPSM6 log file.
